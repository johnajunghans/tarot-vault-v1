*This document contains specifications for the MVP and an ordered list of stages for building the MVP. When updating this document, use strikethrough (~~complete~~) to indicate completion of a step or entire plan topic.*
# 0_Specifications
*Project information, useful links, and change log*
## 0.1_Tech Stack
### 0.1.1_initial package.json file
```json
{
	"name": "tarot-vault-v1",
	"version": "0.1.0",
	"private": true,
	"scripts": {
		"dev": "npm-run-all --parallel dev:frontend dev:backend",
		"dev:frontend": "next dev",
		"dev:backend": "convex dev",
		"predev": "convex dev --until-success && convex dashboard",
		"build": "next build",
		"start": "next start",
		"lint": "eslint ."
	},
	"dependencies": {
		"@base-ui/react": "^1.1.0",
		"@clerk/clerk-react": "^5.60.0",
		"@clerk/nextjs": "^6.37.1",
		"class-variance-authority": "^0.7.1",
		"clsx": "^2.1.1",
		"convex": "^1.31.7",
		"hugeicons-react": "^0.4.0",
		"next": "^16.1.6",
		"react": "^19.2.4",
		"react-dom": "^19.2.4",
		"tailwind-merge": "^3.4.0"
	},
	"devDependencies": {
		"@convex-dev/eslint-plugin": "^1.1.1",
		"@tailwindcss/postcss": "^4.1.18",
		"@types/node": "^24.10.9",
		"@types/react": "^19.2.10",
		"@types/react-dom": "^19.2.3",
		"eslint": "^9.39.2",
		"eslint-config-next": "^16.1.6",
		"npm-run-all2": "^8.0.4",
		"prettier": "^3.8.1",
		"tailwindcss": "^4.1.18",
		"tw-animate-css": "^1.4.0",
		"typescript": "^5.9.3"
	}
}
```
### 0.1.2_Core
- React + NextJS
- TypeScript
### 0.1.3_Frontend
### 0.1.4_Backend
#### 0.1.4.1_Database
- Convex
#### 0.1.4.2_Authentication
- Clerk
#### 0.1.4.3_Server
- Vercel
## 0.2_Details
### 0.2.1_Frontend
#### 0.2.1.1_Shadcn
##### 0.2.1.1.1_initial components.json file

```json
{
	"$schema": "https://ui.shadcn.com/schema.json",
	"style": "base-nova",
	"rsc": true,
	"tsx": true,
	"tailwind": {
		"config": "",
		"css": "app/globals.css",
		"baseColor": "stone",
		"cssVariables": true,
		"prefix": ""
	},
	"iconLibrary": "hugeicons",
	"rtl": false,
	"aliases": {
		"components": "@/components",
		"utils": "@/lib/utils",
		"ui": "@/components/ui",
		"lib": "@/lib",
		"hooks": "@/hooks"
	},
	"registries": {}
}
```
##### 0.2.1.1.2_expected components
- Avatar
- Badge
- Breadcrumb
- Button
- Button Group
- Calendar
- Card
- Collapsable
- Date Picker
- Dialog
- Dropdown Menu
- Empty
- Field
- Input
- Label
- Popover
- Progress
- Radio Group
- Resizable
- Scroll Area
- Select
- Separator
- Sidebar
- Skeleton
- Sonner
- Spinner
- Switch
- Tabs
- Toggle
- Toggle Group
- Tooltip
#### 0.2.1.2_Forms
- react-hook-form + zod
	- Use in combination with shadcn/ui Field component to build forms
#### 0.2.1.3_Dark Mode
- next-themes
	- As outlined in shadcn/ui for use with nextjs
### 0.2.2_Backend
#### 0.2.2.1_Convex
##### 0.2.2.1.1_Tables
###### 0.2.2.1.1.1_users
**Properties**
- _id: users._id
- _creationTime: number (auto-generated by Convex, milliseconds since epoch)
- authId: string (id generated by Clerk)
- tokenIdentifier: string 
- updatedAt: number (milliseconds since epoch)
- lastSignedIn: number (milliseconds since epoch)
- name: string
- email: string
- settings: object
	- appearance: object
		- theme: "light" | "dark" | "system" (default = "system")
	- preferences: object
		- useReverseMeanings: "auto" | "always" | "never" (default = "auto")
	- notifications: object
		- private: object
			- showToasts: boolean (default = true) *whether to show toasts on crud operations*

**Indexes**
- by_authId: ["authId"]
###### 0.2.2.1.1.2_readings
**Custom Card Type**
- Card: object
	- id: number (integer between 0 and 77)
	- position?: number (integer between 1 and 78)
	- reversed: boolean
	- notes: string

**Properties**
- _id: readings._id
- _creationTime: number (auto-generated by Convex, milliseconds since epoch)
- userId: users._id
- updatedAt: number (milliseconds since epoch)
- question: string
- date: number (milliseconds since epoch)
- drawMethod: “manual” | “digital”
- digitalDrawRandomness?: “pseudo” | “real” (user just needs a deck of playing cards and a 6 sided die to generate truly random values for card draws)
- spread: object
    - id: spreads._id
    - version: number (between 0 and 77)
- useReverseMeanings: boolean
- useSignifierCard: boolean
- results: object
    - signifier?: Card
    - cards: Card Array
- title?: string
- context?: string
- image?: _storage._id
- parent?: object
    - type: “reading”
    - id: readings._id
- notes?: string
- interpretations?: interpretations._id Array
- starred: boolean (default = false)

**Indexes**
- by_userId_and_updatedAt: ["userId", "updatedAt"]
- by_userId_and_starred: ["userId", "starred"]

###### 0.2.2.1.1.3_interpretations
**Properties**
- _id: interpretations._id
- _creationTime: number (auto-generated by Convex, milliseconds since epoch)
- userId: users._id
- readingId: readings._id (foreign key - one to many: readings can have many interpretations)
- updatedAt: number (milliseconds since epoch)
- content: string
- source: “self” | “ai”
- focus?: string
- aiMetadata: object
    - tier: “free” | “premium”
    - model: object
        - name: string
        - version: string
    - requestTime: number (milliseconds since epoch)
    - totalCost: number
    - tokensUsed: number
    - systemPrompt?: string

**Indexes**
- by_readingId: ["readingId"]
- by_userId_and_source: ["userId", "source"]

###### 0.2.2.1.1.4_spreads
**Properties**
- _id: spreads._id
- _creationTime: number (auto-generated by Convex, milliseconds since epoch)
- userId: users._id
- updatedAt: number (milliseconds since epoch)
- name: string
- description?: string
- numberOfCards: number (integer between 1 and 78)
- positions: objectArray
    - name: string
    - description?: string
    - transform: object
        - x: number
        - y: number
        - r: number
        - z: number

**Indexes**
- by_userId_and_updatedAt: ["userId", "updatedAt"]

## 0.3_Resources
- [Convex: NextJS+Convex Quickstart](https://docs.convex.dev/quickstart/nextjs)
- [Convex: NextJS+Convex Docs](https://docs.convex.dev/client/nextjs/app-router/)
- [Convex: NextJS+Convex+Clerk Setup](https://docs.convex.dev/auth/clerk#nextjs)
- [Clerk: Convex+Clerk Setup](https://clerk.com/docs/guides/development/integrations/databases/convex)
- [Shadcn: next-themes darkmode setup](https://ui.shadcn.com/docs/dark-mode/next)
- [Convex: storing users in the convex database](https://docs.convex.dev/auth/database-auth)
## 0.4_Git
*Protocol for git version control*
### 0.4.1_Repo Info
- url: https://github.com/johnajunghans/tarot-vault-v1
- license: none
- readme: none
## 0.5_Change Log
*This is a space to track all updates.*
### 0.5.1_Example Entry

**02/02/2026 (date) -- 0.5.1 (step) -- Claude 4.5 Sonnet (model)**
Summary of actions taken (be as concise as possible):
- Action 1
- Action 2
	- Sub-action 1
	- Sub-action 2
- Action 3

Future considerations/recommendations/warnings (Anything at all to consider about this topic moving forward)
- Future consideration/recommendation/warning 1
- Future consideration/recommendation/warning 2
- Future consideration/recommendation/warning 3
### 0.5.2_Entries
*Ordered with most recent at the top*

**02/18 — Step 1.4.3 — Edit Spreads** | Model: Claude Opus 4.6

Summary
- Updated `components/app/app-topbar.tsx`: added optional `breadcrumbs` prop to `AppTopbarProps`; when provided, overrides auto-generated breadcrumbs; existing callers unaffected
- Updated `app/app/personal/spreads/new-spread/page.tsx`: added `searchParams` support to parse `?draft=<timestamp>` query param; passes `draftTimestamp` to `PanelWrapper`
- Updated `app/app/personal/spreads/new-spread/panel-wrapper.tsx`: added `draftTimestamp` prop; `draftDate` ref now uses provided timestamp or `Date.now()`; added one-time `useEffect` to load draft from localStorage and `form.reset()` with data (strips `position` field for `CardDB` → `CardForm` conversion)
- Created `app/app/personal/spreads/[id]/page.tsx`: server component reads `params.id` and layout cookie; passes `spreadId`, `defaultLayout`, `groupId` to `EditPanelWrapper`
- Created `app/app/personal/spreads/[id]/edit-panel-wrapper.tsx`: fetches spread via `useQuery(getById)`; populates form with `form.reset()` guarded by `hasReset` ref to prevent Convex real-time updates from resetting mid-edit; uses `update` mutation; `form.reset(data)` after save to clear dirty state; custom breadcrumbs "Personal > Spreads > Edit Spread"; loading spinner and "not found" states; Cancel/Save Edits buttons with discard dialog
- Updated `app/app/personal/spreads/spread-card.tsx`: added `useRouter` and `handleCardClick` — drafts navigate to `/new-spread?draft=<date>`, saved spreads navigate to `/spreads/<id>?mode=edit`; added `e.stopPropagation()` to draft delete button
- All 72 tests pass; no new lint errors

Future considerations/recommendations/warnings
- `EditPanelWrapper` intentionally duplicates layout JSX from `PanelWrapper` to keep both components simple and independent; if layout logic grows complex, consider extracting a shared layout component
- The `hasReset` ref pattern prevents Convex real-time subscription updates from overwriting user edits; if collaborative editing is added later, this pattern will need rethinking
- Draft loading strips the `position` field (1-indexed card order) since the form uses array index; `position` is re-added at save time

**02/17 — Step 1.2.5 — Responsive Panel Component** | Model: Claude Sonnet 4.6

Summary
- Created `components/app/responsive-panel.tsx`: `ResponsivePanel` component; calls `useIsMobile()` internally; on mobile renders `<Sheet open side sheetTitle>`; on desktop renders `<ResizablePanel>` + `<ResizableHandle>` with configurable `handlePosition` ("before" | "after") and `hideHandle`; all sheet/handle/panel props optional for future versatility
- Updated `spread-settings-panel.tsx`: added `open` and `onOpenChange` props to `SpreadSettingsPanelProps`; replaced `<ResizablePanel id="spread-settings-panel">` + `<ResizableHandle>` block with `<ResponsivePanel panelId="spread-settings-panel" handlePosition="after" side="left" sheetTitle="Spread Settings">`; removed `ResizablePanel`/`ResizableHandle` direct imports
- Updated `card-settings-panel.tsx`: added `open` and `onOpenChange` props to `CardSettingsPanelProps`; replaced `<ResizableHandle>` + `<ResizablePanel id="card-settings-panel">` block with `<ResponsivePanel panelId="card-settings-panel" handlePosition="before" side="right" sheetTitle="Card Settings">`; removed `ResizablePanel`/`ResizableHandle` direct imports
- Updated `panel-wrapper.tsx` mobile branch: replaced two explicit `<Sheet>/<SheetContent>/<SpreadSettingsContent>` and `<Sheet>/<SheetContent>/<CardSettingsContent>` blocks with `<SpreadSettingsPanel open={spreadSheetOpen} onOpenChange={setSpreadSheetOpen} ...>` and `<CardSettingsPanel open={selectedCardIndex !== null} onOpenChange={...} ...>`; removed unused imports (`SpreadSettingsContent`, `CardSettingsContent`, `Sheet`, `SheetContent`, `SheetTitle`, `Cancel01Icon`); passed `open`/`onOpenChange` to panel components in desktop branch as well (no-ops since `ResponsivePanel` detects desktop internally)
- All 72 tests pass; no lint errors

Future considerations/recommendations/warnings
- `ResponsivePanel` returns a `<Sheet>` portal on mobile — it can be rendered anywhere in the tree (inside or outside a `ResizablePanelGroup`) without affecting the group's layout
- The floating collapsed-state card widget in `SpreadSettingsPanel` is desktop-specific UX that lives outside `ResponsivePanel`; if new panel components need similar collapsed widgets they should follow the same pattern
- `isMobile` conditional remains in `panel-wrapper.tsx` for structural layout differences (canvas full-width vs `<ResizablePanel>` inside group, floating toolbar); this is intentional and correct

**02/17 — Step 1.2.4 — Field Component Abstractions** | Model: Claude Sonnet 4.6

Summary
- Created `components/form/text-field.tsx`: `<Field>` + `<Input>` wrapper; `error?: { message?: string }` prop; extends `InputHTMLAttributes` so both `{...form.register()}` spreads and explicit `value`/`onChange`/`onBlur` props work
- Created `components/form/textarea-field.tsx`: same API but wraps `<Textarea>` and extends `TextareaHTMLAttributes`
- Rewrote `components/form/switch-field.tsx` stub: horizontal `<Field>` + `<Switch>`; controlled via `checked`/`onCheckedChange`
- Created `components/form/number-field.tsx`: `<Field>` + number `<Input>`; accepts `value: number`, `onChangeValue`, optional `onBlurTransform` (e.g. `snapToGrid`), and `onBlur`; handles `parseInt` conversion internally
- Updated `spread-settings-panel.tsx`: replaced inline `<Field>/<Input>` and `<Field>/<Textarea>` blocks with `<TextField>` and `<TextareaField>`; removed now-unused `Field`, `FieldContent`, `FieldError`, `FieldLabel`, `Input`, `Textarea` imports
- Updated `card-settings-panel.tsx`: replaced all 7 Controller render-prop field blocks (`name`, `description`, `allowReverse`, `x`, `y`, `r`, `z`) with the new components; removed `cardErrors` variable and unused imports
- All 72 tests pass; no lint errors

Future considerations/recommendations/warnings
- `error` prop is typed as `{ message?: string }` (not react-hook-form's `FieldError`) to accommodate `Merge<FieldError, FieldErrorsImpl>` from nested form structures; this is intentional and correct
- `NumberField` only handles integer parsing via `parseInt`; if float values are needed in future fields, a `parseFloat` variant or a `parseMode` prop would be needed

**02/17 — Step 1.4.2 — Favoriting Spreads** | Model: Claude Sonnet 4.6

Summary
- Added `favorite: v.boolean()` to `spreadValidator` in `convex/schema.ts`; added `by_userId_and_favorite: ["userId", "favorite"]` index to spreads table
- Omitted `"favorite"` from both `spreadsCreateArgs` and `spreadsUpdateArgs` in `convex/tables/spreads.ts`; `create` mutation now always inserts `favorite: false`
- Added `toggleFavorite` mutation: verifies ownership, patches `favorite` to `!spread.favorite`
- Added `listFavorited` query: uses the new index to return all spreads where `favorite === true` for the current user
- Updated all direct `ctx.db.insert("spreads", ...)` calls across `spreads.test.ts`, `readings.test.ts`, and `interpretations.test.ts` to include `favorite: false`
- Added 7 new tests: `toggleFavorite` (false→true, true→false, not-found, unauthorized) and `listFavorited` (unauthenticated, empty when none favorited, returns only favorited, excludes other users')
- Updated `spread-card.tsx`: added `id?: Id<"spreads">` and `favorite?: boolean` props; wired star button to call `toggleFavorite`; star icon now uses `fill={favorite ? "var(--gold)" : "none"}` with `color="var(--gold)"`; tooltip text toggles between "Favorite Spread" / "Unfavorite Spread"
- Updated `page.tsx`: passes `id={spread._id}` and `favorite={spread.favorite}` to `SpreadCard` for each saved spread
- All 72 tests pass; no lint errors

Future considerations/recommendations/warnings
- `listFavorited` collects all favorited spreads without a limit — if a user favorites many spreads, consider adding pagination in a future step
- The star button uses `e.stopPropagation()` to prevent card click propagation; once card navigation is wired up (future step), verify this still behaves correctly

**02/17 — Step 1.3.10 — New Spread Responsive Design** | Model: Claude Opus 4.6

Summary
- Added `truncate max-w-[120px] md:max-w-[200px]` to spread title in panel-wrapper topbar to prevent long titles pushing buttons off-screen
- Added `min-w-0` to centerTitle flex containers in `app-topbar.tsx` to allow flex children to shrink
- Extracted `SpreadSettingsContent` and `CardSettingsContent` as reusable content components from their panel wrappers
- Lifted `addCard` callback from spread-settings-panel up to panel-wrapper for shared use
- On mobile (`isMobile`), replaced ResizablePanelGroup with: floating toolbar (settings + add card buttons), full-width SpreadCanvas, left Sheet for spread settings, right Sheet for card settings
- Sheets positioned below topbar with `!top-[57px] !h-[calc(100vh-57px)]` to avoid overlaying topbar
- `handleSave` onInvalid opens spread settings sheet on mobile instead of expanding panel
- Desktop layout unchanged (ResizablePanelGroup with collapsible panels)
- Removed unused `useIsMobile` import from `app-topbar.tsx`
- All 64 existing tests pass; no new lint errors

Future considerations/recommendations/warnings
- Sheet overlay covers full viewport (standard UX); only sheet content is constrained below topbar
- Topbar height (57px) is hardcoded — if topbar height changes, sheet positioning needs updating
- Card settings sheet auto-opens when a card is selected and auto-closes on deselect via `selectedCardIndex !== null`

**02/14 — Step 1.4.1 — Spreads Page** | Model: Claude Opus 4.6

Summary
- Created `spread-card.tsx` — reusable card component with name, date, and optional DRAFT badge using shadcn Card/Badge
- Updated `page.tsx` — client component that loads saved spreads via `useQuery(api.tables.spreads.list)` and draft spreads from localStorage (`spread-draft-*` keys)
- Responsive grid layout (`sm:grid-cols-2 lg:grid-cols-3`) with loading spinner, empty state, and conditional Drafts section
- All 64 existing tests pass (no backend changes)

Future considerations/recommendations/warnings
- Click handlers on SpreadCard (navigate to edit/view) deferred to a future step
- Draft cleanup (deleting stale drafts, resuming drafts) not yet implemented
- May want to add a "New Spread" button/CTA on the empty state

### 0.5.3_Archived Entries
- 1.3.9 — Local Storage Draft Saving
- 1.3.8 — Final Polishing 1
- Refactor — AppTopbar props instead of Zustand store
- 1.3.7 — Save functionality (validation, Convex create, toasts)
- 1.3.6 — Card Overview (sortable tiles, drag-to-reorder, edit/delete)
- 1.3.5 — Group card select and group drag (marquee + multi-drag)
- 1.3.4 — Card details panel (third resizable panel, position/name/description/allowReverse/x/y/rotation/zIndex)
- 1.3.3 — Spread canvas and card (GSAP drag, grid, alignment guides, spacebar pan)
- 1.3.2 — New Spread page (form with name, numberOfCards, description; topbar integration)
- 1.3.1 — Topbar Zustand store and dynamic title/buttons
- 02/05 — Landing page redesign, global palette, sidebar/topbar refinement
- 1.2.3 — App topbar (sidebar toggle, breadcrumbs, New dropdown)
- 1.2.2 — App sidebar (header link, Interpretations, Settings, collapsed-state fixes)
- 1.2.1 — Setup (layout title, landing auth/redirect, shadcn components)
- 1.1.5 — Convex Vitest test infrastructure and 64 tests (users, readings, spreads, interpretations, http)
- 1.1.4 — Code review (returns validators, index-based queries, DRY validators, _id standardization)
- 1.1.3 — readings.ts, interpretations.ts, spreads.ts CRUD
- 1.1.2 — Clerk webhook, users.ts (current, upsertFromClerk, deleteFromClerk)
- 1.1.1 — Convex schema (users, readings, interpretations, spreads; indexes)

# 1_Build Plan
## ~~1.1_Database & Auth Setup~~
*Full steps archived in mvp-build-archive.md.*
- **1.1.1** — Create database tables in /convex/schema.ts; create indexes; update 0.2.2.1.1 with index specs. ~~Complete~~
- **1.1.2** — Create webhook to sync Clerk with users table: /convex/users.ts, /convex/http.ts; follow [Convex guide](https://docs.convex.dev/auth/database-auth#set-up-webhooks); scan project for auth improvements.
- **1.1.3** — Create readings.ts, interpretations.ts, spreads.ts with list/create/update/remove + table-specific queries. ~~Complete~~
- **1.1.4** — Code review of 1.1.1–1.1.3. ~~Complete~~
- **1.1.5** — Convex tests per table ([Convex Tests](https://docs.convex.dev/testing/convex-test)). ~~Complete~~

## ~~1.2_Frontend Setup~~
*Create placeholder landing page and main components shared by all routes on app. Full steps archived in mvp-build-archive.md.*
- **1.2.1** — Setup: update layout title; landing page (auth, redirect to /app, /app → /app/personal); install shadcn components from 0.2.1.1.2. ~~Complete~~
- **1.2.2** — App-sidebar: header links to /app; content (Personal, Readings, Spreads, Interpretations, tooltips/collapsed fix); footer (UserButton, Settings). ~~Complete~~
- **1.2.3** — App-topbar: sidebar toggle, breadcrumbs (no "app", ChevronRight), placeholder center title, New dropdown (Reading, Spread, Interpretation). ~~Complete~~

### ~~1.2.4_Field Component Abstraction~~
1. Create abstracted components for the react-hook-form based inputs that are found in both spreads/spread-settings-panel.tsx and spreads/card-settings-panel.tsx.
	1. These should be placed in the components/form directory
		1. There already is a switch-field.tsx file which should be completed (or rewritten)
	2. These components should be able to be slotted directly into the spread-settings and card-settings components.
	3. They should all have the Shadcn <Field> component as the parent.
	4. They should be able to be controlled or registered depending on which props are passed to it.
2. Slot these new components into the spread settings and card settings components

### ~~1.2.5_Responsive Panel Component~~
1. Create a component called responsive-panel within the components/app directory
	1. This component should abstract the shared logic that conditionally renders panels or sheets, depending on the value of the useIsMobile boolean hook.
	2. This component should be able to be used in the new-spread/panel-wrapper component and/or the spread-settings and card-settings components to replace the duplicated logic that conditionally renders panels or sheets.
	3. This component should be versitile enough to accomodate future use (rather than just being able to replace the current code)
	4. This component should accept the content of the panel/sheet as its child.
2. Use this component to replace the existing duplicated logic.

## ~~1.3_New Spread~~
*Full steps archived in mvp-build-archive.md.*
- **1.3.1** — Topbar: Zustand store (/stores/topbar.ts) for title (name, addInfo, draft) and rightButtonGroup; app-topbar title section + conditional buttons. ~~Complete~~
- **1.3.2** — New Spread page: two-column layout; left panel form (name, numberOfCards, description) with react-hook-form + zod; topbar integration (Save/Discard, draft badge, live title). ~~Complete~~
- **1.3.3** — Spread canvas (1500×1500 SVG, grid, spacebar pan) and card (GSAP drag, snap-to-grid, alignment guides). ~~Complete~~
- **1.3.4** — Card details panel: third resizable panel; Position/Name/Description/Allow Reverse/X-Y/Rotation/Z-Index; link spread type to schema. ~~Complete~~
- **1.3.5** — Group card select: marquee selection + group drag. ~~Complete~~
- **1.3.6** — Card overview: sortable tiles in spread settings (GSAP drag-to-reorder), edit/delete, "New Card" button. ~~Complete~~
- **1.3.7** — Save: Convex create mutation, disabled+spinner, toasts (Sonner). ~~Complete~~
- **1.3.8** — Final polishing: remove card hover-delete (use panel "Remove Card"), auto-select new card, group-deselect on card click, validation toasts + expand panel, responsive canvas, tooltips. ~~Complete~~
- **1.3.9** — Local storage draft saving: persist form to localStorage; discard confirmation (Cancel / Save as draft / Discard). *In progress / see archive for full spec.*

### ~~1.3.10_New Spread Responsive Design~~
1. For all screen widths, new spread title in topbar should be truncated with ellipses so that it does encroach on surrounding elements. For example, in mobile view, as the user types in their spread title, the corresponding string in the topbar should truncate at a certain width such that the right hand button group is not pushed off to the side. 
2. Both spread settings panel and card settings panel should turn into sheets (shadcn sheet components) at mobile viewports.
	1. Use the useIsMobile hook to dynamically determine mobile viewports.
	2. At mobile viewports, the spread settings panel should always be hidden with a button called "spread settings" and a small plus icon button for adding a new card. When the spread settings button is pressed, then the spread settings form should show as a sheet (i.e. it should overlay the canvas rather than displacing it like the panel does). 
	3. Similarly, at mobile viewports, selecting a card (i.e. setSelectedIndex !== null) should open up a sheet rather than the panel. 
	4. Importantly, these two sheets should NOT overlay the topbar (i.e. the whole height the screen). Instead, their height should be the same as the panel that they replace at mobile viewports. So, the only difference between the panel and the sheet is that the sheet will overlay the canvas while the panel displaces the canvas. 
	5. See components/ui/sidebar.tsx for an example of how the useIsMobile hook is used to conditionally render a sheet at mobile viewports. However, again, the height of these spread settings and card settings sheets should NOT be the whole height of the screen but instead should just conver the canvas, NOT the app-topbar.

## 1.4_View/Edit Spreads
### ~~1.4.1_Spreads Page~~
1. Create a component in /app/personal/spreads to that renders a shadcn card component showing a given spread. Eventually, clicking on the spread will open up the page to view or edit the given spread.
	1. The component should accept a prop for whether the spread is a draft or not, in which case it should have a badge indicating that it is a draft.
	2. The component should display the name of the spread along with the date (just MM/DD/YYYY).
2. The spreads page (/app/personal/spreads/page.tsx) should use the `list` query in the spreads table functions to read the 10 most recently created spreads. These should be displayed using the above card component.
3. The spreads page should also read local storage and pull all items with a key matching the pattern `spread-draft-${Date.now()}`. The date.now() value in the key can be parsed to give the date of the spread draft. 
	1. If the draft has no name, then "Untitled Spread" can be used.
	2. These spread drafts should be rendered in a separate section from the spreads taken from the db.

### ~~1.4.2_Favoriting Spreads~~
1. Add a boolean value to the spreads convex schema called "favorite" which is a boolean. This should be false by default.
2. This favorite boolean should not be present in the new spread form. Instead, users should be able to favorite the spreads they have saved by clicking the star icon which is currently present in the spread card component. 
3. This star icon should toggle the favorite boolean in the db. 
4. When a spread is favorited (i.e. favorite = true for that spread), then the fill of the star icon should be var(--gold).
5. Include a function in the spreads table function which grabs the user's favorited spreads. This will be used later.

### 1.4.3_Edit Spreads
1. Create a dynamic nextjs route within the spreads route so that users can edit existing spreads that they have already created. 
	1. This route should be accessed by clicking on a certain spread within the spreads/page.tsx file.
		1. IMPORTANT: clicking on DRAFTS should route to the new spread page, loading the draft data into that page for continued editing until the user is ready to save to the db
	2. The url of the route should look like: /app/personal/spreads/[spread _id]?mode=edit
		1. The use of the mode=edit param will be used later
	3. The breadcrumbs in the app-topbar at this route should look like: Personal > Spreads > Edit Spread
	4. The title in the app topbar should look the same that within the new-spreads page (name of spread along with number of cards), however, there should be no draft badge.
	5. The righthand button group should have two buttons:
		1. Primary button on the right called "Save Edits" which saves any edits made (this should be disabled if no changes are made)
		2. Ghost button on the left which reads "Cancel"
			1. This button should route straight back to spreads page if no edits are made
			2. If edits have been made, this button should open a dialog confirming that the user would like to discard all edits that they've made.
	6. This route should REUSE the canvas, spread-settings-panel, and card-settings-panel components (all located with the spreads directory)
		1. Thus, the same components are used in this route to edit and create new spreads
